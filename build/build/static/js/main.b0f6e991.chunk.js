(this["webpackJsonpvaccine-exercise-2021"]=this["webpackJsonpvaccine-exercise-2021"]||[]).push([[0],{188:function(e,t,n){},205:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(22),i=n.n(r),s=n(4),o=n(6),d=n(5),l=n.n(d),j=n(11),u=n(19),h=n.n(u),b=n(33),O=n.n(b),x=n(61),f=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.defineDriver(O.a);case 2:return n=h.a.createInstance({driver:[h.a.INDEXEDDB,h.a.LOCALSTORAGE,O.a._driver],name:t}),e.abrupt("return",Object(x.setup)({baseURL:"/api",cache:{maxAge:9e5,store:n}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=n(34),p=n(2),g=function(e){var t=e.vaccinationsData,n=e.ordersData;if(!t||!n)return Object(p.jsx)("pre",{children:"Filtering..."});var c=function(){var e={orders:0,vaccines:0},t={orders:0,vaccines:0},c={orders:0,vaccines:0};n.forEach((function(n){switch(n.vaccine){case"Antiqua":e.orders++,e.vaccines+=n.injections;break;case"SolarBuddhica":t.orders++,t.vaccines+=n.injections;break;case"Zerpfy":c.orders++,c.vaccines+=n.injections}}));var a={orders:e.orders+t.orders+c.orders,vaccines:e.vaccines+t.vaccines+c.vaccines};return{antiqua:e,solarBuddhica:t,zerpfy:c,total:a}}();return Object(p.jsxs)("div",{style:{margin:"20px"},children:[Object(p.jsx)("h2",{children:"This data is processed in browser"}),Object(p.jsxs)("div",{children:["Vaccines used thus far: ",t.length]}),Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{children:["Total orders made thus far: ",n.length]}),Object(p.jsx)("div",{children:"By producer;"}),Object(p.jsxs)("ul",{children:[Object(p.jsxs)("li",{children:["Antiqua: ",c.antiqua.orders]}),Object(p.jsxs)("li",{children:["SolarBuddhica: ",c.solarBuddhica.orders]}),Object(p.jsxs)("li",{children:["Zerpfy: ",c.zerpfy.orders]})]})]}),Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{children:["Total bottles ordered thus far: ",c.total.vaccines]}),Object(p.jsx)("div",{children:"By producer;"}),Object(p.jsxs)("ul",{children:[Object(p.jsxs)("li",{children:["Antiqua: ",c.antiqua.vaccines]}),Object(p.jsxs)("li",{children:["SolarBuddhica: ",c.solarBuddhica.vaccines]}),Object(p.jsxs)("li",{children:["Zerpfy: ",c.zerpfy.vaccines]})]})]})]})},D=(n(188),function(e){var t=e.xScale,n=e.innerHeight;e.tickFormat;return Object(p.jsx)(p.Fragment,{children:t.ticks(o.i.every(1)).map((function(e){return Object(p.jsxs)("g",{className:"tick",transform:"translate(".concat(t(e),", 0)"),children:[Object(p.jsx)("line",{y1:"0",y2:n,stroke:"black"}),Object(p.jsx)("text",{dy:".71em",y:n+3,style:{textAnchor:"middle",fontSize:"0.6em"},children:new Date(e).toLocaleDateString()})]},e)}))})}),m=function(e){var t=e.yScale,n=e.innerWidth;return Object(p.jsx)(p.Fragment,{children:t.ticks().map((function(e){return Object(p.jsxs)("g",{className:"tick",transform:"translate(0, ".concat(t(e),")"),children:[Object(p.jsx)("line",{x2:n}),Object(p.jsx)("text",{style:{textAnchor:"end"},dy:".32em",x:"-3",children:e})]},e)}))})},y=function(e){var t=e.data,n=e.yScale,c=e.xScale,a=e.yValue,r=e.innerHeight;return Object(p.jsx)(p.Fragment,{children:t.map((function(e){return Object(p.jsx)("rect",{className:"mark",y:n(a(e)),x:c(e.x0),width:c(e.x1)-c(e.x0),height:r-n(a(e)),children:Object(p.jsxs)("title",{children:["Date: ",e.x1.toString(),"\n","Vaccinations: ",a(e)]})},e.x0)}))})},S=function(e){var t=e.data,n=e.yScale,c=e.xScale,a=e.yValue,r=e.xValue,i=e.circleRadius,s=void 0===i?5:i;return Object(p.jsxs)("g",{className:"line",children:[Object(p.jsx)("path",{d:Object(o.d)().x((function(e){return c(r(e))})).y((function(e){return n(a(e))})).curve(o.c)(t)}),t.map((function(e){return Object(p.jsx)("circle",{cx:c(r(e)),cy:n(a(e)),r:s,children:Object(p.jsxs)("title",{children:["Date: ",r(e).toString(),"\n","Num Cases: ",a(e)]})},r(e))}))]})},w=20,k=50,A=300-w-45,T=600-k-20,B=function(e){var t=e.vaccinationsData,n=e.casesData,a=Object(c.useState)(!1),r=Object(s.a)(a,2),i=r[0],d=r[1],l=Object(c.useState)(new Date),j=Object(s.a)(l,2),u=j[0],h=j[1],b=Object(c.useState)(new Date),O=Object(s.a)(b,2),x=O[0],f=O[1],v=Object(c.useState)(new Date),g=Object(s.a)(v,2),B=g[0],E=g[1],V=Object(c.useState)(0),C=Object(s.a)(V,2),H=C[0],N=C[1],F=["","HYKS","KYS","OYS","TAYS","TYKS"],q=Object(c.useState)(F[0]),I=Object(s.a)(q,2),L=I[0],R=I[1],Y=["All areas","Helsinki and Uusimaa Hospital District","North Savo Hospital District","North Ostrobothnia Hospital District","Pirkanmaa Hospital District","Southwest Finland Hospital District"],Z=Object(c.useState)(Y[0]),z=Object(s.a)(Z,2),K=z[0],P=z[1];if(Object(c.useEffect)((function(){t&&(E(new Date(o.f(t,(function(e){return e.vaccinationDate})))),h(new Date(o.e(t,(function(e){return e.vaccinationDate})))))}),[t]),Object(c.useEffect)((function(){i&&f(new Date(u).setDate(u.getDate()+15)),i||f(new Date(u).setDate(u.getDate()))}),[u,i]),!t||!n)return Object(p.jsx)("pre",{children:"Loading Data..."});var U=L?t.filter((function(e){return e.sourceBottle.healthCareDistrict===L})):t,W=n.filter((function(e){return e.Area===K&&e.Time>B&&e.Time<x})),G=function(e,t){for(var n=[],c=new Date(e);c<=t;c.setDate(c.getDate()+1))n.push(new Date(c));return n}(B,u),J=o.a().value((function(e){return e.vaccinationDate})).domain([B,u]).thresholds(G)(U);if(!U||!W||!J)return Object(p.jsx)("pre",{children:"Parsing Data..."});var M=o.h().domain([B,x]).range([0,T]).nice(),X=function(e){return e.length},_=function(e){return e.val},Q=function(e,t,n,c){var a=Object(o.e)(e,n),r=Object(o.e)(t,c);return a>r?a:r}(J,W,X,_),$=o.g().domain([Q,0]).range([0,A]).nice();return Object(p.jsxs)("div",{id:"graph",children:[Object(p.jsx)("h1",{children:"Correlation of COVID-19 vaccinations and Reported cases"}),Object(p.jsxs)("h5",{children:["This is a graphical representation of COVID-19 vaccinations (Source:",Object(p.jsx)("a",{href:"https://github.com/solita/vaccine-exercise-2021",children:"Solita Exercise Git Repo"}),") compared with Daily reported COVID-19 cases (Source:"," ",Object(p.jsx)("a",{href:"https://sampo.thl.fi/pivot/prod/en/epirapo/covid19case",children:"sampo.thl.fi"}),")"]}),Object(p.jsxs)("ul",{children:[Object(p.jsxs)("li",{children:[Object(p.jsx)("strong",{children:"Area"})," - The provence displayed"]}),Object(p.jsxs)("li",{children:[Object(p.jsx)("strong",{children:"Extended View"})," - Toggle drop-off period (2 weeks / 15 days)"]})]}),Object(p.jsxs)("label",{children:["Area:",Object(p.jsxs)("select",{id:"area",value:H,onChange:function(e){return function(e){var t=e.target.value;N(t),R(F[t]),P(Y[t])}(e)},children:[Object(p.jsx)("option",{value:0,children:"All Areas"}),Object(p.jsx)("option",{value:1,children:"Uusimaa"}),Object(p.jsx)("option",{value:2,children:"North Savo"}),Object(p.jsx)("option",{value:3,children:"North Ostrobothnia"}),Object(p.jsx)("option",{value:4,children:"Pirkanmaa"}),Object(p.jsx)("option",{value:5,children:"Southwest Finland"})]})]}),Object(p.jsxs)("label",{children:["Extended View:",Object(p.jsx)("button",{id:"extended-view",onClick:function(){d(!i)},children:i?"Hide":"Show"})]}),Object(p.jsx)("svg",{width:600,height:300,children:Object(p.jsxs)("g",{transform:"translate(".concat(k,", ").concat(w,")"),children:[Object(p.jsx)(D,{xScale:M,innerHeight:A}),Object(p.jsx)(m,{yScale:$,innerWidth:T}),Object(p.jsx)(y,{data:J,yScale:$,xScale:M,yValue:X,innerHeight:A}),Object(p.jsx)(S,{data:W,yScale:$,xScale:M,yValue:_,xValue:function(e){return e.Time}})]})})]})},E=function(e){var t=e.data;e.setDate;if(!t)return Object(p.jsx)("div",{children:"Fetching data..."});var n=t.bottlesExpiringToday,c=t.bottlesExpiringWithin10Days,a=t.ordersArrivingToday,r=t.ordersMade,i=t.usedVaccines,s=t.vaccinationsOrdered,o=s.Antiqua,d=s.SolarBuddhica,l=s.Zerpfy;return Object(p.jsxs)("div",{style:{margin:"20px"},children:[Object(p.jsx)("h2",{children:"This data is processed server side"}),Object(p.jsxs)("div",{children:["Vaccines used thus far: ",i]}),Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{children:["Total orders made thus far: ",r]}),Object(p.jsx)("div",{children:"By producer;"}),Object(p.jsxs)("ul",{children:[Object(p.jsxs)("li",{children:["Antiqua: ",o]}),Object(p.jsxs)("li",{children:["SolarBuddhica: ",d]}),Object(p.jsxs)("li",{children:["Zerpfy: ",l]})]})]}),Object(p.jsxs)("div",{children:["Bottles expiring today: ",n]}),Object(p.jsxs)("div",{children:["Bottles expiring within the next 10 days: ",c]}),Object(p.jsxs)("div",{children:["Orders arriving today: ",a]})]})},V=n(62),C=n.n(V),H=function(){var e=Object(c.useState)(new Date),t=Object(s.a)(e,2),n=t[0],a=t[1],r=function(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){f("vaccinations").then(function(){var e=Object(j.a)(l.a.mark((function e(t){var n,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/vaccinations");case 2:n=e.sent,c=n.data,r=c.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{vaccinationDate:new Date(e.vaccinationDate)})})),a(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),n}(),i=function(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){f("orders").then(function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/orders");case 2:n=e.sent,a(n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),n}(),d=function(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){Object(o.b)("https://gist.githubusercontent.com/Serathian/86c591b116df5efe282a8350f4685e61/raw/938ea4e230d56faa68b94fd5a3cc35ee4881b79f/",(function(e){return e.Time=new Date(e.Time),e.val=+e.val,e})).then(a)}),[]),n}(),u=function(e){var t=Object(c.useState)(null),n=Object(s.a)(t,2),a=n[0],r=n[1];return Object(c.useEffect)((function(){f("data").then(function(){var t=Object(j.a)(l.a.mark((function t(n){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.get("/data/".concat(e.toISOString()));case 2:c=t.sent,r(c.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[e]),a}(n);if(console.log(n),!i||!r)return Object(p.jsx)("div",{children:"Fetching data..."});var h=i.filter((function(e){return new Date(e.arrived)<=n})),b=r.filter((function(e){return e.vaccinationDate<=n}));return Object(p.jsxs)("div",{className:"App",style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(p.jsx)(B,{vaccinationsData:b,casesData:d}),Object(p.jsxs)("label",{children:["Change date:",Object(p.jsx)(C.a,{onChange:a,value:n})]}),Object(p.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly"},children:[Object(p.jsx)(g,{vaccinationsData:b,ordersData:h}),Object(p.jsx)(E,{data:u,setDate:a})]})]})};i.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(H,{})}),document.getElementById("root"))}},[[205,1,2]]]);
//# sourceMappingURL=main.b0f6e991.chunk.js.map